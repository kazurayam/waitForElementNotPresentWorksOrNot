= WebUI.waitForElementNotPresent keyword --- was it fixed at v8.6.0 or not?

== Problem to solve

In the Katalon User forum, there was a post
link:https://forum.katalon.com/t/katalon-studio-8-6-0-waitforelementnotpresent-bug-timeout/85476["Katalon Studio 8.6.0 - waitForElementNotPresent - bug - timeout"]. The original post reported that, at v8.6.0, link:https://docs.katalon.com/docs/create-tests/keywords/keyword-description-in-katalon-studio/web-ui-keywords/webui-wait-for-element-not-present[WebUI.waitForElementPresent] keyword failed to work. Later, @vu.tran reported that, at v8.6.5, link:https://forum.katalon.com/t/katalon-studio-8-6-0-waitforelementnotpresent-bug-timeout/85476/30[the bug was fixed]. However, link:https://forum.katalon.com/t/katalon-studio-8-6-0-waitforelementnotpresent-bug-timeout/85476/31[@qa113 wrote] that the bug still remains in v8.6.5.

The bug of waitForElementNotPresent keyword --- is it fixed at v8.6.5 or not?

== Solution

I have developed a Katalon Studio project link:https://github.com/kazurayam/waitForElementNotPresentWorksOrNot[kazurayam/waitForElementNotPresentWorksOrNot]. With it, I examined how `WebUI.waitForElementNotPresent` keyword. How does the keyword works in v8.6.0 and in v8.6.5.

Based on the findings in the examination, I would conclude that the problem was already fixed at v8.6.5.

== Description

What was the original issue? How can I conclude the problem was fixed already? --- I will describe it as follows.


=== Download the project

You can download the zip of this project from the link:https://github.com/kazurayam/waitForElementNotPresentWorksOrNot/releases[Releases] page, unzip it, open it with your local Katalon Studio.

=== Application Under Test

You can see our Application Under Test at link:https://kazurayam.github.io/waitForElementNotPresentWorksOrNot/page.html[]

The page shows a Countdown clock. The clock has a countdown distance of 10 seconds as default.

image::https://kazurayam.github.io/waitForElementNotPresentWorksOrNot/images/AUT_countDownClock.png[Countdown Clock]

Internally the HTML contains an P element with id="demo" as follows:
```
<p id="demo">0d 0h 0m 4s</p>
```

When the countdown clock reaches zero, then the clock will disappear; a message "Gone!" comes up.

image::https://kazurayam.github.io/waitForElementNotPresentWorksOrNot/images/AUT_gone.png[GONE]

Internally, the `<p id="demo">` element is removed when the clock reached zero.



The project contains an HTML file [page.html](https://github.com/kazurayam/waitForElementNotPresentWorksOrNot/blob/master/page.html) which displays a countdown clock which will expire quickly in 5 seconds. When the clock expires, an HTML element with id="demo" will be removed.

The project contains a script [Test Case/TC1](https://github.com/kazurayam/waitForElementNotPresentWorksOrNot/blob/master/Scripts/TC1/Script1692936068230.groovy). This script opens the page.html in a browser. The script calls "waitForElementNotPresent" keyword to check the presense of the HTML element with id="demo" while specifying the timeout 10 seconds. If the keyword could detect that the element has disappeared, the test case will PASS. If the keyword failed to detect it, the test case will FAIL.

I tried to run the TC1 using several versions of Katalon Studio

- v8.6.6 currently latest version
- v8.6.0 which the original post reported the defect
- v8.4.1 with which @kazurayam compared the source code against v8.6.0

I used Firefox browser for this experiment. I refrained from Chrome browser v115 and newers because Chrome recently made a [changed](https://forum.katalon.com/t/as-of-chrome-115-tools-update-webdrivers-chrome-no-longer-works/93200) that makes it difficult to compare the versions.


== Reproducing the problem with v8.6.0

I installed v8.6.0; updated the WebDriver for Firefox; ran "Test Cases/TC1". See the following screenshot.
